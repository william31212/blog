<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Koth on William&#39;s Blog</title>
    <link>http://localhost:1313/blog/tags/koth/</link>
    <description>Recent content in Koth on William&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 25 Jul 2020 19:53:08 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/blog/tags/koth/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>2020_榮耀資戰</title>
      <link>http://localhost:1313/blog/2020/07/2020_%E6%A6%AE%E8%80%80%E8%B3%87%E6%88%B0/</link>
      <pubDate>Sat, 25 Jul 2020 19:53:08 +0000</pubDate>
      <guid>http://localhost:1313/blog/2020/07/2020_%E6%A6%AE%E8%80%80%E8%B3%87%E6%88%B0/</guid>
      <description>&lt;p&gt;2020 合勤榮耀資戰比賽紀錄&lt;/p&gt;&#xA;&lt;h1 id=&#34;2020-合勤榮耀資戰---決賽&#34;&gt;2020 合勤榮耀資戰 - 決賽&lt;/h1&gt;&#xA;&lt;h2 id=&#34;比賽規則&#34;&gt;比賽規則&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;地點: 台北文創六樓&lt;/li&gt;&#xA;&lt;li&gt;形式: King of the hill CTF&lt;/li&gt;&#xA;&lt;li&gt;三階段開啟機器&#xA;&lt;ul&gt;&#xA;&lt;li&gt;第一階段: 50台&lt;/li&gt;&#xA;&lt;li&gt;第二階段: 30台&lt;/li&gt;&#xA;&lt;li&gt;第三階段: 20台&lt;/li&gt;&#xA;&lt;li&gt;一組有5組ip可以做使用&lt;/li&gt;&#xA;&lt;li&gt;進階組則有兩個網段&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;每組有一組字串(token)作為識別，需要將東西寫到網頁(web:80 port)根目錄上，系統會每分鐘去監測該段token是否存在，占領一分鐘得一分&lt;/li&gt;&#xA;&lt;li&gt;並無限制封鎖服務，也就是說&lt;strong&gt;可以&lt;/strong&gt;把該主機原本預計有的漏洞服務關掉，讓別人根本打不進來((結果導致大就用iptable來ban&lt;/li&gt;&#xA;&lt;li&gt;在同網段，弱點偵測(阿怎麼都try弱密碼)、系統入侵(腳本小子大賽)、漏洞防護(關服務囉)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;day1&#34;&gt;Day1&lt;/h2&gt;&#xA;&lt;h3 id=&#34;早上&#34;&gt;早上&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;主要就一些長官來致詞，寒暄一下，以及講解規則&lt;/li&gt;&#xA;&lt;li&gt;先拿&lt;code&gt;nmap&lt;/code&gt;開掃，然後看到幾台有80的就先打打看&#xA;&lt;ul&gt;&#xA;&lt;li&gt;最一開始還有wordpress、xampp站的形狀，摸到一半整台就被佔走了&lt;/li&gt;&#xA;&lt;li&gt;有個奇怪的站，裡面就&lt;code&gt;xss&lt;/code&gt;、&lt;code&gt;sqli&lt;/code&gt;那些經典漏洞，不過嘗試過用&lt;code&gt;;&lt;/code&gt;來做stack-based sqli，都一直失敗，眼睜睜的看著別人在首頁寫下&lt;code&gt;script&lt;/code&gt;，直接佔走首頁的留言板，望塵莫及&lt;/li&gt;&#xA;&lt;li&gt;還有一些IIS、apache、nginx的default page，不過都沒什麼想法，後來很像幾乎都是80的洞，聽說大部分都是&lt;code&gt;ssh&lt;/code&gt;爆破弱密碼之類的&amp;hellip;&lt;/li&gt;&#xA;&lt;li&gt;打到累就吃個便當跟餅乾&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;結果早上都沒拿到半台機器，只能眼睜睜看著別人在榜上一直上上下下&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;下午&#34;&gt;下午&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;看著大家逐漸佔下機器，看看掃到的那些ip，丟上去幾乎都被別人佔走，不然就是掛掉，幾乎都沒辦法打了&lt;/li&gt;&#xA;&lt;li&gt;後來開了第二波機器，看到有開&lt;code&gt;3389&lt;/code&gt;跟&lt;code&gt;445&lt;/code&gt;，就google看看有沒有windows的exploit來試試，不過似乎都沒有&#xA;&lt;ul&gt;&#xA;&lt;li&gt;大概在結束個前兩個小時，被我試到&lt;code&gt;MS17-010&lt;/code&gt;(永恆之藍)的&lt;code&gt;exploit&lt;/code&gt;能成功打進去，成功拿到&lt;code&gt;meterpreter&lt;/code&gt;的&lt;code&gt;shell&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;拿到&lt;code&gt;shell&lt;/code&gt;之後，我們討論的做法是先將token寫到網頁根目錄，接下來想辦法把能關的服務都關掉，想辦法開防火牆&#xA;&lt;ul&gt;&#xA;&lt;li&gt;看到這篇文: &lt;a href=&#34;https://www.freebuf.com/articles/web/208598.html&#34;&gt;https://www.freebuf.com/articles/web/208598.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;不過事情沒那麼簡單，我們都不熟windows，又加上只有cli&#xA;&lt;ul&gt;&#xA;&lt;li&gt;首先要找到webroot，就查了一堆文章，原先以為webroot是在tomcat資料夾裡面，後來找到只要將檔案寫到&lt;code&gt;C:\inetpub\wwwroot&lt;/code&gt;裡面，檔案名稱叫&lt;code&gt;index.html&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;接著想辦法要開防火牆，有找到幾command以為是設定防火牆，結果回家才發現只是設定防火牆的規則，根本沒開。不過這台都沒人打進來，卑鄙源之助&#xA;&lt;ul&gt;&#xA;&lt;li&gt;而且windows還將防火牆分三層(私人、公用&amp;hellip;甚麼的)，也不知道到底開哪層&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;中間斷斷續續的遇到shell斷掉，有時打得進去打不進去的狀況&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;後來又發現有兩台根本一模一樣的洞，在&lt;code&gt;80&lt;/code&gt;port，是&lt;code&gt;403 forbiddent&lt;/code&gt;的頁面&#xA;&lt;ul&gt;&#xA;&lt;li&gt;就按照流程一次，讓我們靠一個exploit，同時能有三台機器在上面賺分數&lt;/li&gt;&#xA;&lt;li&gt;不過時間很像也快結束，所以很像也只賺個100分左右&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;day2&#34;&gt;Day2&lt;/h2&gt;&#xA;&lt;h3 id=&#34;早上-1&#34;&gt;早上&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;隔天早上一來，比賽一開始還發現機器都還活著，還幫我們賺了一些分數&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不過後來快到中午很像有被別人打掛，或者是機器當機，不確定原因，但我也進不去shell，所以我也不清楚實際上發生甚麼事&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;後來到中午又陸陸續續開了20台吧，因為題目重複的關係，導致那些原本有exploit就照做，而我依然只能看著80放著別人的flag，加上有將近一半的機器都被打掛或是被佔走換了密碼，也不知道要打甚麼&lt;/li&gt;&#xA;&lt;li&gt;另外還有遇到進的去shell，但甚麼都打不進去的狀況，後來感覺像是&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E8%9C%9C%E7%BD%90_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8)&#34;&gt;honeypot&lt;/a&gt;，很像被別人耍成白癡一樣&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;下午-1&#34;&gt;下午&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;我還多掙扎了幾下，盡量找找看有甚麼其他port有甚麼exploit，不過try都失敗&lt;/li&gt;&#xA;&lt;li&gt;果斷開啟跑跑來玩，排位打起來，直接放棄&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;心得&#34;&gt;心得&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;第一次體驗這種形式的ctf還蠻好玩的，不過因為比賽規則的關係，讓大家普遍都覺得失去King of the hill的意義，很像失去了原本ctf應有的品質&lt;/li&gt;&#xA;&lt;li&gt;以下列出幾項我覺得能改善的部分(不過我認為有些真的要做到也有一定難度)&#xA;&lt;ul&gt;&#xA;&lt;li&gt;並無限制伺服器服務(service)的完整性，導致大家進去就關服務關Port，不然就將防火牆打開，讓大家根本沒有機會再打進來&#xA;&lt;ul&gt;&#xA;&lt;li&gt;我自認為有點像是大家預定要在山上格鬥，結果先到的那個人直接把要格鬥的場地直接圍起來，讓大家都不要進來，直接在裡面稱霸&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;太多靶機幾乎完全相同，讓原本打到洞的人可以持續佔領，讓別人也無法動那台&lt;/li&gt;&#xA;&lt;li&gt;第一天一直放相同的歌單，很像只loop三首吧。不過到了第二天雖然歌單有換，但很像就是一直The future, gay gay gay i i呵呵(求歌單)，還看到其他組的人跟著空耳&lt;/li&gt;&#xA;&lt;li&gt;運氣成分大於技術部分，很像也不是ctf應該有的情況&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;不過主辦單位認為，這是為了符合社會現實情況，實際的機器也有可能在其他地方找到相同，而且也並無限制使用一些防禦機制&#xA;&lt;ul&gt;&#xA;&lt;li&gt;我個人認為這已經失去了king of the hill的原本目的了啦哈哈&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;在頒獎典禮的過程，也有一些小插曲，我就不方便陳述太多細節了，很像增添了比賽的一點樂趣((誤&lt;/li&gt;&#xA;&lt;li&gt;雖然初賽很像吊車尾進去決賽的，不過進去還能夠拿個第九，很像還可以啦哈哈，雖然就只試到一個exploit而已&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;照片記錄&#34;&gt;照片記錄&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://photos.app.goo.gl/TDsrgFK1LMjHDQP67&#34;&gt;我都放在這了&lt;/a&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
